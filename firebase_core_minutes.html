<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAA.ZONE‚Ñ¢ Minutes of Meeting: Firebase Core Setup</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Base styles from the original template */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* slate-100 */
        }
        .main-container-style {
            background-color: #ffffff;
            border-top: 8px solid #4f46e5; /* indigo-600 */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border-radius: 1.5rem;
            margin-left: auto;
            margin-right: auto;
            width: 100%;
            padding: 1rem;
        }
        @media (min-width: 640px) {
            .main-container-style {
                padding: 2rem;
                max-width: 640px;
            }
        }
        @media (min-width: 768px) {
            .main-container-style {
                padding: 2.5rem;
                max-width: 768px;
            }
        }
        @media (min-width: 1024px) {
            .main-container-style {
                padding: 3rem;
                max-width: 1024px;
            }
        }

        /* Header styles */
        .top-fruitful-header {
            background-color: #ffffff;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
            width: 100%;
            max-width: 1024px;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 640px) {
            .top-fruitful-header {
                padding: 1rem 2rem;
                margin-bottom: 2rem;
            }
        }
        .fruitful-logo-text {
            font-family: 'Inter', sans-serif;
            font-size: 1.75rem;
            font-weight: 800;
            color: #4f46e5;
            margin-right: 0.25rem;
        }
        @media (min-width: 640px) {
            .fruitful-logo-text {
                font-size: 2.5rem;
            }
        }

        /* FAA.ZONE Logo/Header */
        .faazone-header h1 {
            font-size: 1.75rem;
        }
        @media (min-width: 640px) {
            .faazone-header h1 {
                font-size: 2.5rem;
            }
        }
        .faazone-header span {
             font-size: 2.5rem;
        }
        @media (min-width: 640px) {
            .faazone-header span {
                font-size: 3rem;
            }
        }

        /* Document item styles */
        .document-item {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 0.75rem;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: all 0.2s ease-in-out;
            text-align: left;
            width: 100%;
        }
        @media (min-width: 640px) {
            .document-item {
                flex-direction: row;
                align-items: flex-start;
                gap: 1rem;
                padding: 1rem;
            }
        }
        .document-item:hover {
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transform: translateY(-2px);
            border-color: #a78bfa;
        }
        .document-item .icon {
            flex-shrink: 0;
            font-size: 2rem;
            color: #4f46e5;
        }
        @media (min-width: 640px) {
            .document-item .icon {
                font-size: 2.5rem;
            }
        }
        .document-item-content h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }
        @media (min-width: 640px) {
            .document-item-content h3 {
                font-size: 1.125rem;
            }
        }
        .document-item-content p {
            font-size: 0.875rem;
            color: #475569;
            margin-bottom: 0.5rem;
        }
        @media (min-width: 640px) {
            .document-item-content p {
                font-size: 0.95rem;
            }
        }
        .code-snippet {
            background-color: #e2e8f0;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-family: monospace;
            font-size: 0.75rem;
            overflow-x: auto;
            color: #1e293b;
            white-space: pre-wrap;
            word-break: break-word;
        }
        @media (min-width: 640px) {
            .code-snippet {
                padding: 1rem;
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex flex-col items-center p-4">

    <!-- New Top Header for Fruitful‚Ñ¢ Logo -->
    <header class="top-fruitful-header">
        <span class="fruitful-logo-text">Fruitful‚Ñ¢</span>
    </header>

    <div class="main-container-style p-8 rounded-3xl max-w-4xl w-full flex flex-col min-h-[80vh]">
        <div class="flex-grow">
            <!-- FAA.ZONE Logo/Header -->
            <div class="flex items-center justify-center gap-3 mb-8 faazone-header">
                <span class="text-4xl">ü¶ç</span>
                <h1 class="font-bold text-3xl text-slate-800">FAA.ZONE&trade;</h1>
            </div>

            <h2 class="text-3xl font-extrabold text-slate-800 mb-6 tracking-tight text-center">
                Minutes of Meeting: <span class="text-indigo-600">Firebase Core Setup</span>
            </h2>
            
            <div class="space-y-6 mb-8 flex flex-col items-center w-full"> 
                <div class="document-item p-4 max-w-full">
                    <div class="icon">üìÖ</div>
                    <div class="document-item-content flex-grow">
                        <h3>Meeting Overview</h3>
                        <p><strong>Date:</strong> June 22, 2025</p>
                        <p><strong>Attendees:</strong> Gemini (AI), Heyns (User)</p>
                        <p><strong>Purpose:</strong> Document the initial Firebase project setup, including Authentication and Cloud Firestore, which form the core backend for the Seedwave Admin Panel.</p>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">üíª</div>
                    <div class="document-item-content flex-grow">
                        <h3>Seedwave Admin Panel Application Context</h3>
                        <p>Overview of the core application relevant to Firebase setup.</p>
                        <ul class="list-disc list-inside text-slate-700 space-y-1 mt-2">
                            <li><strong>Application Name:</strong> Seedwave Admin Panel</li>
                            <li><strong>Deployment URL:</strong> <a href="https://seedwave.faa.zone/admin_panel_xero.html" target="_blank" class="text-indigo-600 font-semibold hover:underline">https://seedwave.faa.zone/admin_panel_xero.html</a></li>
                            <li><strong>Hosting Platform:</strong> Git Pages</li>
                            <li><strong>Core Technologies:</strong> HTML, JavaScript, Tailwind CSS.</li>
                            <li><strong>Integrated Services:</strong> Firebase (Authentication, Firestore), Google Analytics, Xero (via OAuth 2.0 API).</li>
                        </ul>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">üî•</div>
                    <div class="document-item-content flex-grow">
                        <h3>Firebase Project Setup: "FAA Nexus"</h3>
                        <p>Detailed steps for setting up the foundational Firebase project.</p>
                        <ul class="list-disc list-inside text-slate-700 space-y-1 mt-2">
                            <li><strong>Project Name:</strong> FAA Nexus</li>
                            <li><strong>Firebase Console URL:</strong> <a href="https://console.firebase.google.com/project/faa-nexus/overview" target="_blank" class="text-indigo-600 font-semibold hover:underline">https://console.firebase.google.com/project/faa-nexus/overview</a></li>
                            <li><strong>Firebase SDK Version Used in Code:</strong> `11.9.1`</li>
                            <li><strong>Firebase Project ID (`appId`):</strong> `faa-nexus`</li>
                        </ul>
                        <h4 class="font-semibold text-slate-800 mt-4 mb-2">Live Firebase Configuration Snippet (from `admin_panel_xero.html`):</h4>
                        <pre class="code-snippet"><code>const firebaseConfig = {
    apiKey: "AIzaSyCR3mbgoiiCkRyaAm5BSWBWBFwut0MDCW8",
    authDomain: "faa-nexus.firebaseapp.com",
    projectId: "faa-nexus",
    storageBucket: "faa-nexus.firebasestorage.app",
    messagingSenderId: "459816542686",
    appId: "1:459816542686:web:7fc0596fb70e2e6b753d4f",
    measurementId: "G-S4ZB8QV782"
};</code></pre>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">üÜî</div>
                    <div class="document-item-content flex-grow">
                        <h3>Firebase Authentication Setup</h3>
                        <p>Configuration of user identity within Firebase Auth.</p>
                        <ul class="list-disc list-inside text-slate-700 space-y-1 mt-2">
                            <li><strong>Purpose:</strong> Provides user identity solution for the admin panel, enabling anonymous sign-in for Firestore access.</li>
                            <li><strong>Provider Enabled:</strong> Anonymous (as the initial sign-in method to store Xero tokens).</li>
                            <li><strong>Console Path for Authentication Methods:</strong> <a href="https://console.firebase.google.com/project/faa-nexus/authentication/users" target="_blank" class="text-indigo-600 hover:underline">Firebase Console -> Build -> Authentication -> Sign-in method</a>.</li>
                        </ul>
                        <h4 class="font-semibold text-slate-800 mt-4 mb-2">Client-Side Authentication Code Snippet (from `admin_panel_xero.html`):</h4>
                        <pre class="code-snippet"><code>import { getAuth, signInAnonymously, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
// ... initialization code
const auth = getAuth(app);

// Authenticate with Firebase
window.firebaseAuth = async function() {
    try {
        await signInAnonymously(auth); // Currently using anonymous sign-in
        console.log("Firebase authentication successful.");
    } catch (error) {
        console.error("Firebase authentication failed:", error);
        window.showMessageBox("Failed to authenticate with Firebase. Check console for details.", "error");
    }
};

// Listen for auth state changes
onAuthStateChanged(auth, (user) => {
    if (user) { /* User is signed in */ }
    else { /* User is signed out */ }
});

// Logout function
window.logout = async function() { await signOut(auth); };</code></pre>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">üóÑÔ∏è</div>
                    <div class="document-item-content flex-grow">
                        <h3>Cloud Firestore Setup</h3>
                        <p>Configuration of the Firestore database for data storage.</p>
                        <ul class="list-disc list-inside text-slate-700 space-y-1 mt-2">
                            <li><strong>Purpose:</strong> Real-time NoSQL database used for securely storing user-specific Xero access and refresh tokens.</li>
                            <li><strong>Database Creation:</strong> Initiated in "Production Mode."</li>
                            <li><strong>Console Path for Firestore:</strong> <a href="https://console.firebase.google.com/project/faa-nexus/firestore/data" target="_blank" class="text-indigo-600 hover:underline">Firebase Console -> Build -> Firestore Database</a>.</li>
                            <li><strong>Data Path for Xero Tokens:</strong> `/artifacts/{appId}/users/{userId}/xeroTokens/xero_oauth`</li>
                        </ul>
                        <h4 class="font-semibold text-slate-800 mt-4 mb-2">Cloud Firestore Security Rules Snippet (from Firebase Console Rules Tab):</h4>
                        <pre class="code-snippet"><code>rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /artifacts/{appId}/users/{userId}/xeroTokens/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}</code></pre>
                        <h4 class="font-semibold text-slate-800 mt-4 mb-2">Client-Side Firestore Interaction Snippet (from `admin_panel_xero.html` for Xero Tokens):</h4>
                        <pre class="code-snippet"><code>import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";
// ... initialization code
const db = getFirestore(app);

// Function to save Xero tokens to Firestore
window.saveXeroTokens = async function(userId, tokens) {
    await setDoc(doc(db, `artifacts/${appId}/users/${userId}/xeroTokens/xero_oauth`), tokens);
};

// Function to load Xero tokens from Firestore
window.loadXeroTokens = async function(userId) {
    const docRef = doc(db, `artifacts/${appId}/users/${userId}/xeroTokens/xero_oauth`);
    const docSnap = await getDoc(docRef);
    if (docSnap.exists()) { return docSnap.data(); }
    return null;
};</code></pre>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">üåê</div>
                    <div class="document-item-content flex-grow">
                        <h3>Firebase Hosting Setup</h3>
                        <p>Configuration for deploying the Seedwave Admin Panel web application.</p>
                        <ul class="list-disc list-inside text-slate-700 space-y-1 mt-2">
                            <li><strong>Purpose:</strong> Used to deploy the `admin_panel_xero.html` web application.</li>
                            <li><strong>Deployment URL:</strong> <a href="https://seedwave.faa.zone/admin_panel_xero.html" target="_blank" class="text-indigo-600 font-semibold hover:underline">https://seedwave.faa.zone/admin_panel_xero.html</a></li>
                            <li><strong>Console Path for Hosting:</strong> <a href="https://console.firebase.google.com/project/faa-nexus/hosting" target="_blank" class="text-indigo-600 hover:underline">Firebase Console -> Build -> Hosting</a></li>
                            <li>**Current Deployment Method:** Git Pages (Firebase Hosting is a viable alternative for future direct deployment).</li>
                        </ul>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">üìà</div>
                    <div class="document-item-content flex-grow">
                        <h3>Google Analytics Integration</h3>
                        <p>Setup for tracking application usage.</p>
                        <ul class="list-disc list-inside text-slate-700 space-y-1 mt-2">
                            <li><strong>Purpose:</strong> Provides insights into application usage and user behavior via Google Analytics 4 (GA4).</li>
                            <li><strong>Measurement ID:</strong> `G-S4ZB8QV782`</li>
                            <li><strong>Console Path:</strong> <a href="https://analytics.google.com/" target="_blank" class="text-indigo-600 hover:underline">Google Analytics Console</a></li>
                        </ul>
                        <h4 class="font-semibold text-slate-800 mt-4 mb-2">GA4 Tracking Code Snippet (in `admin_panel_xero.html` `<head>`):</h4>
                        <pre class="code-snippet"><code>&lt;script async src="https://www.googletagmanager.com/gtag/js?id=G-S4ZB8QV782"&gt;&lt;/script&gt;
&lt;script&gt;
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-S4ZB8QV782');
&lt;/script&gt;</code></pre>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">üêõ</div>
                    <div class="document-item-content flex-grow">
                        <h3>Detailed Troubleshooting & Resolutions (Firebase Specific)</h3>
                        <p>Record of Firebase-related issues encountered and their resolutions.</p>
                        <ul class="list-disc list-inside text-slate-700 space-y-1 mt-2">
                            <li>**Initial Javascript Errors (`Uncaught ReferenceError: loadContent is not defined`):**
                                <ul class="list-disc list-inside ml-4">
                                    <li>**Cause:** Functions defined inside `<script type="module">` were not globally accessible to `onclick` attributes in HTML.</li>
                                    <li>**Resolution:** All relevant functions were explicitly attached to the `window` object (e.g., `window.loadContent = function() { ... }`).</li>
                                </ul>
                            </li>
                            <li>**Firebase Authentication Network Errors (`auth/network-request-failed`, `auth/configuration-not-found`, `400 Bad Request`):**
                                <ul class="list-disc list-inside ml-4">
                                    <li>**Cause:** Content Security Policy (CSP) blocking necessary Firebase/Google network requests; Firebase Anonymous Auth not enabled; Firebase SDK version mismatch; typo in initial token assignment.</li>
                                    <li>**Resolution:**
                                        <ul class="list-disc list-inside ml-4">
                                            <li>Expanded `script-src`, `connect-src`, and `frame-src` in CSP to include all required Firebase/Google domains (`https://www.gstatic.com`, `https://apis.google.com`, `https://securetoken.googleapis.com`, `https://*.firebaseio.com`, `https://*.firebaseapp.com`, `https://accounts.google.com`, `https://www.googleapis.com`, `https://firebaseauth.googleapis.com`, `https://identitytoolkit.googleapis.com`, `https://auth.firebase.com`).</li>
                                            <li>Added `'unsafe-inline'` to `script-src` for inline event handlers.</li>
                                            <li>Enabled Anonymous Authentication in Firebase Console (`Build -> Authentication -> Sign-in method`).</li>
                                            <li>Ensured Firebase SDK imports in HTML (`firebasejs/11.9.1`) match Firebase console configuration.</li>
                                            <li>Fixed typo in `initialAuthToken` assignment.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>**Firestore Connection/Permission Errors (`400 Bad Request`, `Could not reach Cloud Firestore backend`, `Failed to get document because the client is offline`):**
                                <ul class="list-disc list-inside ml-4">
                                    <li>**Cause:** No Cloud Firestore database provisioned or incorrect/restrictive Firestore Security Rules.</li>
                                    <li>**Resolution:**
                                        <ul class="list-disc list-inside ml-4">
                                            <li>Cloud Firestore database was provisioned in "Production Mode" (`Build -> Firestore Database`).</li>
                                            <li>Firestore Security Rules were configured to specifically allow authenticated users (including anonymous) to read and write only to their own user-specific `xeroTokens` path (`/artifacts/{appId}/users/{userId}/xeroTokens/{document=**}`).</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="document-item p-4 max-w-full">
                    <div class="icon">‚û°Ô∏è</div>
                    <div class="document-item-content flex-grow">
                        <h3>Action Items & Immediate Next Steps</h3>
                        <ul class="list-disc list-inside text-slate-700">
                            <li>Confirm resolution of all Firebase-related issues on `https://seedwave.faa.zone/admin_panel_xero.html`.</li>
                            <li>Continue to await Xero Support response (Case CX0016588829) for the persistent Xero OAuth authorization issue.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- FAA.ZONE Footer -->
        <div class="mt-8 pt-6 border-t border-slate-200 text-center">
            <div class="text-xs text-slate-400">
                <p>&copy; 2025 FAA.ZONE‚Ñ¢</p>
                <p>Firebase Core Setup Minutes v1.0</p>
            </div>
        </div>
    </div>
</body>
</html>
